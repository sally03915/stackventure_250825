<!DOCTYPE html>
<html lang="ko">
<head>
  <title>DBDBIG</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <!--                                    -->
    <!--                                    -->
    <!--                                    -->
    <!--                                    -->
    <!--                                    -->
    <div class="p-3 bg-danger text-white ">
    <h1>009. OBJECT  </h1>
    <ol>
        <li>array</li>
        <li>object</li>
    </ol>
    </div><!-- end navi  -->

    <!--                -->
    <!--                -->
    <!--                -->
    <br/>
    <br/>
    <br/>
    <div class="container card  my-3">
        <h3  class="card-header">EX1 - ARRAY</h3>
        <pre>
        Q1. 배열의 이미지 a1.jpg , a2.jpg , a3.jpg , a4.jpg 파일 넣기
        Q2. #array1 버튼을 클릭하면 a1.jpg, a2.jpg, a3.jpg, a4.jpg 순서대로 이미지경로바뀌기
        </pre>
        <p><input type="button"  value="IMG-SHOW"     id="array1"   class="btn btn-danger" /></p>
        <p class="result r1"><img src="img/a1.jpg" alt=""  style="width:50%"></p>
        <script>
        window.addEventListener('load' , function(){
            let arr = ['a1.jpg' , 'a2.jpg' , 'a3.jpg' , 'a4.jpg' , 'a5.jpg'];
            //0~4
            //Q2.이벤트대상 : #array1 버튼을
            //   이벤트     : 클릭하면
            //   이벤트핸들러:a1.jpg, a2.jpg, a3.jpg, a4.jpg 순서대로 이미지경로바뀌기
            let array1 = document.getElementById('array1');
            let target = document.querySelector('.r1 img');
            let cnt=0;
            //console.log(array1);
            console.log(target);
            array1.addEventListener('click' , function(){
                target.src = 'img/' +arr[++cnt] ;
                if(cnt>3) cnt=0;
            });
        });
        </script>
    </div><!-- end container  -->

    <!--                -->
    <!--                -->
    <!--                -->
    <br/>
    <br/>
    <br/>
    <hr/>
    <div class="container card  my-3">
        <h3  class="card-header">EX2 - ARRAY</h3>

        <pre>
        Q1. 배열의 이미지 a1.jpg , a2.jpg 파일 넣기
        Q2. #array2 버튼을 클릭하면  a1.jpg 라면 a2.jpg로 변경
                a2.jpg 라면 a1.jpg로 변경
        </pre>
        <p><input type="button"  value="A1-A2-CHANGE" id="array2"   class="btn btn-danger" /></p>
        <p class="result r2"><img src="img/a1.jpg" alt=""   style="width:50%"></p>
        <script>
        window.addEventListener('load' , function(){
            let arr = ['a1.jpg' , 'a2.jpg' ];
            //0~4
            //Q2.이벤트대상 : #array2 버튼을
            //   이벤트     : 클릭하면
            //   이벤트핸들러:a1.jpg 라면 a2.jpg로 변경
            //               a2.jpg 라면 a1.jpg로 변경
            let array2 = document.getElementById('array2');
            let target = document.querySelector('.r2 img');
            // console.log(target);   console.log(target.src);

            array2.addEventListener('click' , function(){
                let index=0;    //'a1.jpg'  ->  arr[0]                 arr[1]
                if(target.src=='http://127.0.0.1:5500/img/a1.jpg'){ index=1;}
                target.src='img/' + arr[index];
            });
        });
        </script>
    </div><!-- end container  -->

    <!--                -->
    <!--                -->
    <!--                -->
    <br/>
    <br/>
    <br/>
    <hr/>
    <div class="container card  my-3">
        <h3  class="card-header">EX3 - OBJECT</h3>
        <pre>
        Q1. Avengers 생성자만들기
            no , name, img, show 속성 으로 가짐
            * no, name은 사용자에게 입력받기
            * img는  해당 no의 번호로 처리  ->  no가 1이라면 a1.jpg
        Q2. let iron = new Avengers(1, 'iron');
            이미지에 마우스를 올리면 해당 이미지 보여주기 a1.jpg

        </pre>
        <pre>
        Q3. new Avengers(1, 'iron') , new Avengers(2, 'hulk') , new Avengers(3, 'captain')
            데이터 이용
            let teams = [new Avengers(1, 'iron') , new Avengers(2, 'hulk') , new Avengers(3, 'captain')];
            let trs  = document.querySelectorAll("#avengers_table tbody tr");
            let tds  = trs[0].querySelectorAll('td');
        </pre>

        <table  id="avengers_table"  class="table table-bordered  table-striped  table-hover">
            <caption>2030 학생명단</caption>
            <colgroup>
                <col style="width:10%">
                <col style="width:30%">
                <col style="width:60%">
            </colgroup>
            <thead>
                <tr><th scope="col">NO</th>
                    <th scope="col">NAME</th>
                    <th scope="col">IMG</th></tr>
            </thead>
            <tbody>
                <tr><td>1</td><td>team1</td><td><img src="img/a5.jpg" alt=""   style="width:50%"></td></tr>
                <tr><td>2</td><td>team2</td><td><img src="img/a5.jpg" alt=""   style="width:50%"></td></tr>
                <tr><td>3</td><td>team3</td><td><img src="img/a5.jpg" alt=""   style="width:50%"></td></tr>
            </tbody>
        </table>
        <script>
        //Q1 생성자
        function Avengers(no, name){
            this.no  = no;
            this.name= name;
            this.img =  'a'+this.no+'.jpg';
            this.show=function(){  };
        }
        //Q2 데이터준비
        window.addEventListener('load',function(){
            //let iron = new Avengers(1, 'iron');  console.log(iron);
            let teams = [ new Avengers(1, 'iron') ,
                          new Avengers(2, 'hulk') ,
                          new Avengers(3, 'captain') ]; //console.log(teams);

            //Q3 view(#avengers_table  tr 안에 각 td)에 데이터 넣기
            //대상1.   #avengers_table  tr
            //대상2.   tr안에 있는 td[0] 번호   td[1] 이름
            //효과1    데이터 넣기 - innerHtml = teams[0].no   console.log(teams[0].no);
            let  trs = document.querySelectorAll('#avengers_table tbody  tr ');//console.log(trs);

            //Q4  이미지에 마우스를 올리면 해당 이미지 보여주기 a1.jpg
            //대상2.   td[2] 안에  이미지
            for(let i=0; i<trs.length; i++){
                let  tds = trs[i].querySelectorAll('td');
                let  img = tds[2].querySelector('img');
                //console.log(trs);   console.log(trs[0]);    console.log(tds[0]);
                tds[0].innerHTML =  teams[i].no;
                tds[1].innerHTML =  teams[i].name;
                tds[2].addEventListener('mouseover' , function(){
                    img.src = 'img/'+teams[i].img;
                });
                tds[2].addEventListener('mouseout' , function(){
                    img.src = 'img/a5.jpg';
                });
            }
        });
        </script>
    </div>

    <!--                -->
    <!--                -->
    <!--                -->
    <br/>
    <br/>
    <br/>
    <hr/>
    <div class="container card  my-3">
        <h3  class="card-header">009. OBJECT - STEP3. Ajax</h3>
        <!--     -->
        <!--     -->
        <hr/>
        <div class="card-body">
          <h4>EX-TEXT</h4>
          <p><input type="button"  id="xmlHttpRequest2"
              value="xmlHttpRequest2"  class="btn btn-danger"  onclick="show2()"/></p>
          <div class="result r2"  id="result2">
            <table  class="table table-striped table-bordered table-hover">
              <caption>어벤져스멤버들</caption>
              <colgroup>
                <col style="width:20%"/><col style="width:20%"/><col style="width:35%"/><col style="width:25%"/>
              </colgroup>
              <thead>
                <tr>
                  <th scope="col" >NAME</th><th scope="col" >AGE</th><th scope="col" >ADDRESS</th><th scope="col" >MOBILE</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
          <script>
            function show2(){
              //1.  XMLHttpRequest : 서버와 비동기적으로 데이터 교환
                xmlhttp = new XMLHttpRequest();
              //2.  onreadystatechange
              //readyState ( 0  로딩중  ,,, 4서버처리끝) / status ( 200  성공)	/responseText(  처리내용 )

              xmlhttp.onreadystatechange = function(){

                //alert("1: " + xmlhttp.readyState );    alert("2: " + xmlhttp.status );
                if(   xmlhttp.readyState == 4  && xmlhttp.status == 200  ){
                  //  console.log(xmlhttp.responseText);
                  let txt = xmlhttp.responseText;
                  let txtrow = txt.split("\n");
                  let txtcnt = txtrow.length;
                  result ='';
                  for(var  index=0; index<txtcnt; index++){
                    // 동적엘리먼트생성
                    let arr     =  txtrow[index].split("/");
                    let tr =   "<tr>";
                    var td1 =  "<td>"+arr[0] +"</td>";
                    var td2 =  "<td>"+arr[1] +"</td>";
                    var td3 =  "<td>"+arr[2] +"</td>";
                    var td4 =  "<td>"+arr[3] +"</td></tr>";
                    //원하는 위치에 데이터 삽입
                    tr+= td1 + td2 + td3 + td4;
                    result+=tr;
                  } // end for
                  console.log(result);
                  document.querySelector("#result2  tbody").innerHTML = result;
                } // end if
              };
              //3. 파일연결
              xmlhttp.open("get" , "./data/text2.txt" ,   true);
              //4. 파일전송
              xmlhttp.send();
            }
          </script>
        </div>
        <!--     -->
        <!--     -->
        <hr/>
        <div class="card-body">
          <h4>EX-JSON</h4>
          <p><input type="button"  id="json2"
              value="xmlHttpRequest2"  class="btn btn-danger"  onclick="show4()"/></p>
          <div class="result r4"  id="json_result2">
            <table  class="table table-striped table-bordered table-hover">
              <caption>어벤져스멤버들</caption>
              <colgroup>
                <col style="width:20%"/><col style="width:20%"/><col style="width:35%"/><col style="width:25%"/>
              </colgroup>
              <thead>
                <tr>
                  <th scope="col" >NAME</th><th scope="col" >AGE</th><th scope="col" >ADDRESS</th><th scope="col" >MOBILE</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
          <script>
            function show4(){
              //1.  XMLHttpRequest : 서버와 비동기적으로 데이터 교환
                xmlhttp = new XMLHttpRequest();
              //2.  onreadystatechange
              //readyState ( 0  로딩중  ,,, 4서버처리끝) / status ( 200  성공)	/responseText(  처리내용 )

              xmlhttp.onreadystatechange = function(){

                //alert("1: " + xmlhttp.readyState );    alert("2: " + xmlhttp.status );
                if(   xmlhttp.readyState == 4  && xmlhttp.status == 200  ){
                  //  console.log(xmlhttp.responseText);
                  let txt = xmlhttp.responseText;
                  let txtrow = txt.split("\n");
                  let txtcnt = txtrow.length;
                  result ='';
                  for(var  index=0; index<txtcnt; index++){
                    // 동적엘리먼트생성
                    let arr     =  txtrow[index].split("/");
                    let tr =   "<tr>";
                    var td1 =  "<td>"+arr[0] +"</td>";
                    var td2 =  "<td>"+arr[1] +"</td>";
                    var td3 =  "<td>"+arr[2] +"</td>";
                    var td4 =  "<td>"+arr[3] +"</td></tr>";
                    //원하는 위치에 데이터 삽입
                    tr+= td1 + td2 + td3 + td4;
                    result+=tr;
                  } // end for
                  console.log(result);
                  document.querySelector("#result2  tbody").innerHTML = result;
                } // end if
              };
              //3. 파일연결
              xmlhttp.open("get" , "./data/text2.txt" ,   true);
              //4. 파일전송
              xmlhttp.send();
            }
          </script>
        </div>
        <!--     -->
        <!--     -->
        <hr/>
        <div class="card-body">
          <h4>EX-XML</h4>
          <p><input type="button"  id="xml2"
              value="xmlHttpRequest2"  class="btn btn-danger"  onclick="show6()"/></p>
          <div class="result r2"  id="xml_result2">
            <table  class="table table-striped table-bordered table-hover">
              <caption>MILKS</caption>
              <colgroup>
                <col style="width:20%"/><col style="width:20%"/><col style="width:35%"/><col style="width:25%"/>
              </colgroup>
              <thead>
                <tr>
                  <th scope="col" >NAME</th><th scope="col" >AGE</th><th scope="col" >ADDRESS</th><th scope="col" >MOBILE</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
          <script>
            function show2(){
              //1.  XMLHttpRequest : 서버와 비동기적으로 데이터 교환
                xmlhttp = new XMLHttpRequest();
              //2.  onreadystatechange
              //readyState ( 0  로딩중  ,,, 4서버처리끝) / status ( 200  성공)	/responseText(  처리내용 )

              xmlhttp.onreadystatechange = function(){

                //alert("1: " + xmlhttp.readyState );    alert("2: " + xmlhttp.status );
                if(   xmlhttp.readyState == 4  && xmlhttp.status == 200  ){
                  //  console.log(xmlhttp.responseText);
                  let txt = xmlhttp.responseText;
                  let txtrow = txt.split("\n");
                  let txtcnt = txtrow.length;
                  result ='';
                  for(var  index=0; index<txtcnt; index++){
                    // 동적엘리먼트생성
                    let arr     =  txtrow[index].split("/");
                    let tr =   "<tr>";
                    var td1 =  "<td>"+arr[0] +"</td>";
                    var td2 =  "<td>"+arr[1] +"</td>";
                    var td3 =  "<td>"+arr[2] +"</td>";
                    var td4 =  "<td>"+arr[3] +"</td></tr>";
                    //원하는 위치에 데이터 삽입
                    tr+= td1 + td2 + td3 + td4;
                    result+=tr;
                  } // end for
                  console.log(result);
                  document.querySelector("#result2  tbody").innerHTML = result;
                } // end if
              };
              //3. 파일연결
              xmlhttp.open("get" , "./data/text2.txt" ,   true);
              //4. 파일전송
              xmlhttp.send();
            }
          </script>
        </div>
    </div><!-- end container  -->


</body>
</html>